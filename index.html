<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SPA Universe</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="background">
    <nav class="navbar">
      <img src="./images/logo.svg" alt="" />
      <ul class="navbar-links">
        <li><a href="/" onclick="route()">Home</a></li>
        <li><a href="/universe" onclick="route()">O Universo</a></li>
        <li><a href="/exploration" onclick="route()">Exploração</a></li>
        <li><a href="/404" onclick="route()">404</a></li>
      </ul>
    </nav>
    <div id="app"></div>
    <script>
      const routes = {
        "/": "/pages/home.html",
        "/universe": "/pages/universe.html",
        "/exploration": "/pages/exploration.html",
        404: "/pages/404.html",
      };

      function route(event) {
        event = event || window.event;
        event.preventDefault();
        window.history.pushState({}, "", event.target.href);
        handle();
      }

      function handle() {
        const pathname = window.location.pathname;
        const route = routes[pathname] || routes[404];

        let backgroundImg;

        if (pathname === "/") {
          backgroundImg = "url(./images/mountains-universe-1.png)";
        } else if (pathname === "/universe") {
          console.log("oi");
          backgroundImg = "url(./images/mountains-universe-2.png)";
        } else if (pathname === "/exploration") {
          backgroundImg = "url(./images/mountains-universe-3.png)";
        } else {
          backgroundImg = "url(./images/mountains-universe-1.png)";
        }

        let background = document.querySelector(".background");

        background.style.backgroundImage = backgroundImg;

        fetch(route)
          .then((data) => data.text())
          .then((html) => {
            document.querySelector("#app").innerHTML = html;
          });
      }

      handle();
      window.onpopstate = () => handle();
    </script>
  </body>
</html>
